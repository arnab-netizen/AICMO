| Category | Service | Purpose | SDK/Client | Required ENV | Optional ENV | Secrets | Least-Privilege Notes | Local Mock | Code Refs |
|---|---|---|---|---|---|---|---|---|---|
| Analytics/Telemetry | PostHog/Segment/Sentry/OTel | External connection discovered via code scan | Segment, segment |  |  |  |  | See checklist | backend/agency_grade_enhancers.py:444, backend/main.py:397, backend/tests/test_report_validation.py:366 |
| Config | Config | External connection discovered via code scan | load_dotenv |  |  |  |  | See checklist | backend/main.py:13, backend/main.py:19, backend/main.py:21 |
| Database | Postgres/SQL DB | External connection discovered via code scan | SQLAlchemy, asyncpg, pgvector, psycopg, sqlalchemy | DATABASE_URL, SQLALCHEMY_URL |  |  |  | See checklist | .github/workflows/ci-debug.yml:8, .github/workflows/ci-lite.yml:107, .github/workflows/ci-lite.yml:224, .github/workflows/ci-lite.yml:253, .github/workflows/ci-lite.yml:254, .github/workflows/ci-lite.yml:255, .github/workflows/ci-lite.yml:257, .github/workflows/ci-lite.yml:259, .github/workflows/ci-lite.yml:314, .github/workflows/ci-lite.yml:325, .github/workflows/ci-lite.yml:356, .github/workflows/ci-lite.yml:359, .github/workflows/ci-lite.yml:438, .github/workflows/ci-lite.yml:454, .github/workflows/ci-lite.yml:49, .github/workflows/ci-lite.yml:496, .github/workflows/ci-lite.yml:522, .github/workflows/ci-lite.yml:566, .github/workflows/ci-lite.yml:586, .github/workflows/ci-lite.yml:72, .github/workflows/ci.yml:106, .github/workflows/ci.yml:113, .github/workflows/ci.yml:115, .github/workflows/ci.yml:117, .github/workflows/ci.yml:178, .github/workflows/ci.yml:180, .github/workflows/ci.yml:198, .github/workflows/ci.yml:200, .github/workflows/ci.yml:204, .github/workflows/ci.yml:208 |
| HTTP APIs | External HTTP APIs | External connection discovered via code scan | httpx, requests | AICMO_CLAUDE_MODEL, AICMO_LEARNING_ARCHIVE_DIR, AICMO_MEMORY_DB, AICMO_MODEL_MAIN, AICMO_TURBO_ENABLED, ALEMBIC_CONFIG, ALEMBIC_OFFLINE, APP_NAME, DB_CONNECT_TIMEOUT, DB_STARTUP_RETRY_SECS, DB_URL, LOG_LEVEL, SITEGEN_ENABLED, SITEGEN_TASK_QUEUE, SMOKE_SKIP |  |  |  | See checklist | .github/workflows/ci.yml:160, backend/agency_grade_enhancers.py:38, backend/alembic/check_single_head.py:6, backend/alembic/env.py:121, backend/alembic/env.py:131, backend/alembic/env.py:166, backend/api/routes_learn.py:26, backend/api/routes_learn.py:89, backend/api/sitegen.py:18, backend/core/config.py:11, backend/core/config.py:12, backend/core/config.py:13, backend/core/config.py:14, backend/db/session.py:31, backend/dependencies.py:14, backend/main.py:1047, backend/main.py:1101, backend/main.py:1131, backend/main.py:97, backend/main.py:979, backend/modules/copyhook/tests/test_copyhook_v2.py:2, backend/modules/copyhook/tests/test_copyhook_v2.py:33, backend/modules/copyhook/tests/test_copyhook_v2.py:8, backend/modules/sitegen/routes.py:92, backend/modules/taste/router.py:28, backend/modules/taste/router.py:37, backend/modules/visualgen/tests/test_visualgen_v2.py:19, backend/modules/visualgen/tests/test_visualgen_v2.py:3, backend/services/wow_autofill.py:35, backend/tests/test_agency_grade_direct.py:16 |
| LLM | LLM provider(s) | External connection discovered via code scan | OpenAI, openai, together | AICMO_OPENAI_MODEL, AICMO_USE_LLM, OPENAI_API_KEY |  | OPENAI_API_KEY |  | See checklist | backend/agency_grade_enhancers.py:10, backend/agency_grade_enhancers.py:12, backend/agency_grade_enhancers.py:124, backend/agency_grade_enhancers.py:23, backend/agency_grade_enhancers.py:25, backend/agency_grade_enhancers.py:28, backend/agency_grade_enhancers.py:31, backend/agency_grade_enhancers.py:56, backend/agency_grade_enhancers.py:612, backend/dependencies.py:10, backend/humanization_wrapper.py:10, backend/humanization_wrapper.py:11, backend/humanization_wrapper.py:12, backend/humanization_wrapper.py:15, backend/humanization_wrapper.py:17, backend/humanization_wrapper.py:20, backend/humanization_wrapper.py:26, backend/humanization_wrapper.py:38, backend/humanization_wrapper.py:96, backend/main.py:943, backend/services/llm_client.py:1, backend/services/llm_client.py:10, backend/services/llm_client.py:20, backend/services/llm_client.py:5, backend/services/wow_autofill.py:21, backend/services/wow_autofill.py:44, backend/tests/test_agency_grade_direct.py:15, backend/tests/test_aicmo_generate_stub_mode.py:125, backend/tests/test_aicmo_generate_stub_mode.py:151 |
| Migrations | Migrations | External connection discovered via code scan | Alembic, alembic |  |  |  |  | See checklist | .github/workflows/ci-debug.yml:26, .github/workflows/ci-debug.yml:38, .github/workflows/ci-debug.yml:39, .github/workflows/ci-debug.yml:40, .github/workflows/ci-debug.yml:41, .github/workflows/ci-debug.yml:42, .github/workflows/ci-debug.yml:44, .github/workflows/ci-lite.yml:176, .github/workflows/ci-lite.yml:177, .github/workflows/ci-lite.yml:253, .github/workflows/ci-lite.yml:259, .github/workflows/ci-lite.yml:286, .github/workflows/ci-lite.yml:287, .github/workflows/ci-lite.yml:288, .github/workflows/ci-lite.yml:292, .github/workflows/ci-lite.yml:294, .github/workflows/ci-lite.yml:304, .github/workflows/ci-lite.yml:309, .github/workflows/ci-lite.yml:310, .github/workflows/ci-lite.yml:318, .github/workflows/ci-lite.yml:321, .github/workflows/ci-lite.yml:327, .github/workflows/ci-lite.yml:34, .github/workflows/ci-lite.yml:341, .github/workflows/ci-lite.yml:344, .github/workflows/ci-lite.yml:362, .github/workflows/ci-lite.yml:365, .github/workflows/ci-lite.yml:366, .github/workflows/ci-lite.yml:367, .github/workflows/ci-lite.yml:375 |
| Object Storage | S3/MinIO | External connection discovered via code scan |  | S3_ENDPOINT |  |  |  | See checklist | backend/modules/copyhook/api/router.py:192, backend/modules/copyhook/api/router.py:224, backend/modules/visualgen/api/router.py:202, backend/tests/tools/test_inventory_script.py:21 |
| Orchestrator | Temporal | External connection discovered via code scan | temporalio | TEMPORAL_ADDRESS, TEMPORAL_E2E, TEMPORAL_NAMESPACE |  |  |  | See checklist | .github/workflows/ci-lite.yml:189, .github/workflows/ci-lite.yml:203, .github/workflows/ci-lite.yml:204, .github/workflows/ci-lite.yml:645, backend/api/sitegen.py:11, backend/api/sitegen.py:17, backend/minimal_tests/test_temporal_smoke.py:12, backend/minimal_tests/test_temporal_smoke.py:14, backend/minimal_tests/test_temporal_smoke.py:15, backend/minimal_tests/test_temporal_smoke.py:9, backend/routers/sitegen.py:12, backend/routers/sitegen.py:13, backend/routers/sitegen.py:4, backend/routers/workflows.py:13, backend/routers/workflows.py:14, backend/routers/workflows.py:5, backend/sitegen/worker.py:10, backend/sitegen/worker.py:4, backend/sitegen/worker.py:5, backend/sitegen/worker.py:9, backend/sitegen/workflows.py:3, backend/tests/test_workflows_mocked.py:45, backend/tests/test_workflows_mocked.py:46, docker/temporal-compose.clean.yml:19, docker/temporal-compose.clean.yml:36, docker/temporal-compose.clean.yml:60, docker/temporal-compose.clean.yml:69, docker/temporal-compose.yml:19, docker/temporal-compose.yml:36, docker/temporal-compose.yml:61 |
| Web Framework | Web Framework | External connection discovered via code scan | FastAPI, fastapi, starlette |  |  |  |  | See checklist | backend/api/routes_learn.py:1, backend/api/routes_learn.py:15, backend/api/sitegen.py:7, backend/app.py:35, backend/app.py:5, backend/app.py:53, backend/app.py:6, backend/app.py:7, backend/app/main.py:1, backend/db/session.py:118, backend/dependencies.py:1, backend/export_utils.py:16, backend/main.py:1, backend/main.py:135, backend/main.py:21, backend/main.py:22, backend/main.py:23, backend/minimal_app/main.py:1, backend/minimal_app/main.py:3, backend/minimal_tests/test_minimal.py:1, backend/modules/copyhook/api/router.py:1, backend/modules/sitegen/routes.py:5, backend/modules/sitegen/routes.py:60, backend/modules/taste/router.py:121, backend/modules/taste/router.py:124, backend/modules/taste/router.py:6, backend/modules/visualgen/api/router.py:1, backend/routers/deployments.py:3, backend/routers/health.py:1, backend/routers/health.py:2 |

## Local Bring-Up (quick)
- **Database (Postgres + asyncpg)**: docker run -d --name pg -e POSTGRES_USER=aicmo -e POSTGRES_PASSWORD=pass -e POSTGRES_DB=aicmo -p 5432:5432 postgres:16
- **S3/MinIO**: docker run -d --name minio -e MINIO_ROOT_USER=minio -e MINIO_ROOT_PASSWORD=minio-secret -p 9000:9000 -p 9001:9001 minio/minio server /data --console-address :9001
  - Create bucket: docker run --rm --network host minio/mc sh -c "mc alias set local http://127.0.0.1:9000 minio minio-secret && mc mb -p local/aicmo-assets || true"
- **Temporal (dev)**: docker run -d --name temporalite -p 7233:7233 temporalio/temporalite:latest start --namespace aicmo-dev --ip 0.0.0.0
- **OpenAI (LLM)**: set OPENAI_API_KEY with your key; for offline dev, guard calls or use a mock.
- **Redis (if detected)**: docker run -d --name redis -p 6379:6379 redis:7
- Export envs: `cp .env.example .env && edit`, then `set -a && source .env && set +a`.
